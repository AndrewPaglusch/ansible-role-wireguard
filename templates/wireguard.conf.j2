[Interface]
Address = {{ wireguard_address }}
PrivateKey = {{ wireguard_private_key }}
ListenPort = {{ wireguard_port }}

{% for item in wireguard_postup | default([]) %}
{% if item.comment | default(false) %}
# {{ item.comment }}
{% endif %}
PostUp = {{ item.command }}
{% endfor %}
{% for item in wireguard_postdown | default([]) %}
{% if item.comment | default(false) %}
# {{ item.comment }}
{% endif %}
PostDown = {{ item.command }}
{% endfor %}

{% for peer in wireguard_peers %}
{% if peer.name | default(false) %}
# {{ peer.name }}
{% endif %}
[Peer]
PublicKey = {{ peer.public_key }}
AllowedIPs = {{ peer.allowed_ips }}
{% if peer.endpoint | default(false) %}
Endpoint = {{ peer.endpoint }}
{% endif %}
{% if peer.keepalive | default(wireguard_peer_keepalive) %}
PersistentKeepalive = {{ peer.keepalive | default(wireguard_peer_keepalive) }}
{% endif %}

{% endfor %}
